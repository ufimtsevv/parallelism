## Лабораторная работа №2

### Описание вычислительного узла:

- **Модель CPU**: Intel(R) Xeon(R) Gold 6248 CPU @ 2.50GHz  
- **Ядер/сокет**: 20  
- **Сокетов**: 2  
- **Потоков/ядро**: 2  
- **Всего логических CPU**: 80  
- **Сервер:** ProLiant XL270d Gen10
- **NUMA-узлы**: 2 (node0: 385636 MB, node1: 387008 MB)  
- **ОС**: Ubuntu 22.04.5 LTS  

---
### Результаты:  

#### Задание 1: Умножение матрицы на вектор 

Тестирование проводилось для двух размеров матриц:  
- **20000×20000** (~3 GiB)  
- **40000×40000** (~12 GiB)  
##### Таблица результатов:  

| Размер матрицы | Потоки | Время (сек) | Ускорение (Sₚ) |
|----------------|--------|------------|---------------|
| 20000×20000    | 1      | 0.7710     | 1.00          |
|                | 2      | 0.3934     | 1.96          |
|                | 4      | 0.2875     | 2.68          |
|                | 8      | 0.1891     | 4.08          |
|                | 16     | 0.1237     | 6.23          |
|                | 20     | 0.1153     | 6.69          |
|                | 40     | 0.0715     | 10.79         |
|ㅤ|ㅤ|ㅤ|ㅤ|
| 40000×40000    | 1      | 2.4322     | 1.00          |
|                | 2      | 1.2309     | 1.98          |
|                | 4      | 0.6021     | 4.04          |
|                | 8      | 0.3523     | 6.90          |
|                | 16     | 0.1744     | 13.94         |
|                | 20     | 0.1424     | 17.08         |
|                | 40     | 0.1099     | 22.14         |

![images/task1_speedup.png|500|center]

- Для матрицы 40000×40000 наблюдается почти линейное ускорение до 16 потоков (S=13.94).
- Для больших матриц эффективность выше (~87% на 16 потоках).
- Ускорение для 40000×40000 в 2 раза выше, чем для 20000×20000 (22.14 vs 10.79 на 40 потоках).
---
#### Задание 2: Численное интегрирование  

**Число шагов**: 40 000 000  
##### Таблица результатов:

| Потоки | Время (сек) | Ускорение (Sₚ) |
| ------ | ----------- | -------------- |
| 1      | 0.3665      | 1.00           |
| 2      | 0.2048      | 1.79           |
| 4      | 0.1188      | 3.09           |
| 8      | 0.0612      | 5.99           |
| 16     | 0.0373      | 9.82           |
| 20     | 0.0495      | 7.40           |
| 40     | 0.0266      | 13.79          |

![images/task2_speedup.png|500|center]

- Максимальное ускорение: 13.79x при 40 потоках. Линейная область до 8 потоков.
- На 20 потоках снижение ускорения до 7.40x (конфликт NUMA-узлов).
- Реализация с `#pragma omp atomic` обеспечивает точные результаты
- Оптимальный диапазон потоков: **8-16** (эффективность >60%)
---
### Задание 3: Решение СЛАУ методом простой итерации  

**Размер системы**: 40000×40000  
##### Сравнение стратегий распараллеливания:  
1. **Метод 1**: Отдельные `#pragma omp parallel for`  
2. **Метод 2**: Единая `#pragma omp parallel`  

|             |           | 1      | 2      | 4      | 8     | 16    | 32    | 40    |
| ----------- | --------- | ------ | ------ | ------ | ----- | ----- | ----- | ----- |
| **Метод 1** | Время (с) | 38.623 | 19.532 | 11.642 | 6.063 | 4.243 | 3.410 | 3.089 |
|             | Ускорение | 1.00   | 1.98   | 3.32   | 6.37  | 9.10  | 11.33 | 12.50 |
| **Метод 2** | Время (с) | 36.891 | 19.206 | 9.506  | 4.910 | 3.258 | 2.925 | 2.547 |
|             | Ускорение | 1.00   | 1.92   | 3.88   | 7.51  | 11.32 | 12.61 | 14.48 |

![images/task3_speedup.png|500|center]

- **Метод 2 эффективнее** на 8+ потоках (до 14.48x ускорения).
- **Линейное ускорение** до 16 потоков для обоих методов.
- **Пороги масштабирования**: 16 потоков (S=9.10) для метода 1, 32 потока (S=12.61) для метода 2.
- **Оптимальная конфигурация**: 16-32 потока + Метод 2 (`#pragma omp parallel`).
- Для малых систем (<16 потоков) — оба метода равноценны.
---